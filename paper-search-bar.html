<link rel="import" href="../polymer/polymer-element.html">
<link rel="import" href="../iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../iron-input/iron-input.html">
<link rel="import" href="./paper-search-icons.html">
<link rel="import" href="../iron-icon/iron-icon.html">
<link rel="import" href="../paper-icon-button/paper-icon-button.html">
<link rel="import" href="../paper-input/paper-input-container.html">
<link rel="import" href="../paper-input/paper-input.html">
<link rel="import" href="../iron-behaviors/iron-button-state.html">
<link rel="import" href="../iron-behaviors/iron-control-state.html">
<link rel="import" href="../paper-styles/paper-styles.html">
<link rel="import" href="../iron-media-query/iron-media-query.html">

<!--

@element paper-search-bar
@demo demo/index.html
-->
<dom-module id="paper-search-bar">
    <template>
        <style>
             :host {
                outline: 0;
                font-size: 16px;
                font-weight: 400;
                line-height: 24px;
                --paper-search-bc: {
                    background-color: dodgerblue;
                };
            }

             :host(*:not([fullbleed])) {
                -webkit-transition: background-color .1s ease-in;
                transition: background-color .1s ease-in;
                @apply --paper-search-bc;
                @apply --layout-flex-auto;
            }

             :host(*:not([fullbleed])) #search {
                display: inline-block;
            }

             :host([fullbleed]) {
                @apply --layout-fit;
                -webkit-transition: background-color .2s ease-in;
                transition: background-color .2s ease-in;
                background-color: white;
                align-items: center;
            }

             :host([fullbleed]) #search {
                display: none;
            }

             :host([focused])  {
                -webkit-transition: background-color .2s ease-in;
                transition: background-color .2s ease-in;
                background-color: white;
            }

             :host(*:not([focused])) {
                -webkit-transition: background-color .2s ease-out;
                transition: background-color .2s ease-out;
               /* background-color: inherit;*/
            }

             :host(*:not([wide-layout])) {
                -webkit-transition: background-color .2s ease-out;
                transition: background-color .2s ease-out;
            }

            div[content] {
                display: flex;
                height: 100%;
                align-items: center;
            }

            div[wide-layout] {
                @apply --layout-flex-auto;
                @apply --input-search-container;
            }

            paper-input {
                --paper-input-container-underline: {
                    display: none;
                }
                ;
                --paper-input-container-underline-focus: {
                    display: none;
                }
                ;
                --paper-input-container-underline-disabled: {
                    display: none;
                }
                ;
            }

            paper-input {
                width: 100%;
            }

            [prefix],
            [suffix] {
                flex: none;
            }

            [hidden] {
                @apply --layout-invisible;
            }
        </style>

        <iron-media-query query="(min-width: 600px)" query-matches="{{wide}}"></iron-media-query>

        <div content wide-layout$="[[wide]]">


            <paper-icon-button id="search" prefix icon="paper-search-icons:search" on-tap="_activeSearch" tabindex="-1"></paper-icon-button>

            <dom-if if="[[fullbleed]]">
                <template>
                    <paper-icon-button id="back" prefix icon="paper-search-icons:back" on-tap="_deactiveSearch" tabindex="-1"></paper-icon-button>
                </template>
            </dom-if>

            <dom-if if="[[_showInput]]">
                <template>
                    <paper-input id="input" no-label-float value="{{query}}" placeholder="[[placeholder]]"></paper-input>
                    <paper-icon-button hidden$="[[!query]]" id="clear" suffix on-tap="_clear" icon="paper-search-icons:clear" tabindex="-1"></paper-icon-button>
                </template>
            </dom-if>
        </div>

    </template>
    <script src="scripts/paper-search-bar.js">

    </script>
</dom-module>
